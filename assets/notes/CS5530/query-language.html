<!DOCTYPE html> <html lang="zh-cn"><head>
<title>Query Language</title>
<base href="..">
<meta name="pathname" content="cs5530/query-language.html">
<meta name="description" content="CS - Query Language">
<meta property="og:title" content="Query Language">
<meta property="og:description" content="CS - Query Language">
<meta property="og:type" content="website">
<meta property="og:url" content="cs5530/query-language.html">
<meta property="og:image" content="undefined">
<meta charset="UTF-8"><meta property="og:site_name" content="CS"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="preload" href="site-lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/snippets.css"></noscript><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager styled-scrollbars show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles">mjx-c.mjx-c1D700.TEX-I::before{padding:.452em .466em .022em 0;content:"ε"}mjx-c.mjx-c2205.TEX-A::before{padding:.587em .778em 0 0;content:"∅"}mjx-c.mjx-c2019::before{padding:.694em .278em 0 0;content:"’"}mjx-c.mjx-c393::before{padding:.68em .625em 0 0;content:"Γ"}mjx-c.mjx-c27F9::before{padding:.525em 1.638em .024em 0;content:"⟹"}mjx-c.mjx-c23::before{padding:.694em .833em .194em 0;content:"#"}mjx-c.mjx-c6A::before{padding:.669em .306em .205em 0;content:"j"}mjx-c.mjx-c6B::before{padding:.694em .528em 0 0;content:"k"}mjx-c.mjx-c21::before{padding:.716em .278em 0 0;content:"!"}mjx-c.mjx-c2229::before{padding:.598em .667em .022em 0;content:"∩"}mjx-c.mjx-c4C::before{padding:.683em .625em 0 0;content:"L"}mjx-c.mjx-c2216::before{padding:.75em .5em .25em 0;content:"∖"}mjx-c.mjx-c7A::before{padding:.431em .444em 0 0;content:"z"}mjx-c.mjx-c2228::before{padding:.598em .667em .022em 0;content:"∨"}mjx-c.mjx-c2227::before{padding:.598em .667em .022em 0;content:"∧"}mjx-c.mjx-c22EF::before{padding:.31em 1.172em 0 0;content:"⋯"}mjx-c.mjx-c1D6FF.TEX-I::before{padding:.717em .444em .01em 0;content:"δ"}mjx-c.mjx-c28.TEX-S1::before{padding:.85em .458em .349em 0;content:"("}mjx-c.mjx-c29.TEX-S1::before{padding:.85em .458em .349em 0;content:")"}.mjx-stretched mjx-c.mjx-c2013::before{content:"–"}mjx-stretchy-h.mjx-c2013 mjx-ext mjx-c::before{content:"–";padding:.285em 0 0}mjx-c.mjx-c44::before{padding:.683em .764em 0 0;content:"D"}mjx-c.mjx-c4E::before{padding:.683em .75em 0 0;content:"N"}mjx-c.mjx-c1D43A.TEX-I::before{padding:.705em .786em .022em 0;content:"G"}mjx-c.mjx-c200B::before{padding:0;content:""}mjx-c.mjx-c47::before{padding:.705em .785em .022em 0;content:"G"}mjx-c.mjx-c2329::before{padding:.75em .389em .25em 0;content:"⟨"}mjx-c.mjx-c232A::before{padding:.75em .389em .25em 0;content:"⟩"}mjx-c.mjx-c4F::before{padding:.705em .778em .022em 0;content:"O"}mjx-c.mjx-c7B.TEX-S3::before{padding:1.45em .75em .949em 0;content:"{"}mjx-c.mjx-c2209::before{padding:.716em .667em .215em 0;content:"∉"}mjx-c.mjx-c2270.TEX-A::before{padding:.801em .778em .303em 0;content:"≰"}mjx-c.mjx-c2223::before{padding:.75em .278em .249em 0;content:"∣"}mjx-c.mjx-c1D43F.TEX-I::before{padding:.683em .681em 0 0;content:"L"}mjx-c.mjx-c27E8::before{padding:.75em .389em .25em 0;content:"⟨"}mjx-c.mjx-c27E9::before{padding:.75em .389em .25em 0;content:"⟩"}mjx-c.mjx-c3A3::before{padding:.683em .722em 0 0;content:"Σ"}mjx-c.mjx-c222A::before{padding:.598em .667em .022em 0;content:"∪"}mjx-c.mjx-c2F::before{padding:.75em .5em .25em 0;content:"/"}mjx-c.mjx-c27FA::before{padding:.525em 1.858em .024em 0;content:"⟺"}mjx-c.mjx-c2264::before{padding:.636em .778em .138em 0;content:"≤"}mjx-c.mjx-c1D6FD.TEX-I::before{padding:.705em .566em .194em 0;content:"β"}mjx-stretchy-v.mjx-c7B mjx-beg mjx-c::before{content:"⎧";padding:.899em .889em .01em 0}mjx-stretchy-v.mjx-c7B mjx-ext mjx-c::before{content:"⎪";width:.889em}mjx-stretchy-v.mjx-c7B mjx-end mjx-c::before{content:"⎩";padding:.01em .889em .899em 0}mjx-stretchy-v.mjx-c7B mjx-mid mjx-c::before{content:"⎨";padding:1.16em .889em .66em 0}mjx-stretchy-v.mjx-c7B>mjx-mid{margin-top:-.91em;margin-bottom:-.91em}mjx-stretchy-v.mjx-c7B>mjx-end{margin-top:-.909em}mjx-stretchy-v.mjx-c7B>mjx-ext{height:50%;border-top-width:.879em;border-bottom-width:.879em}mjx-c.mjx-c51::before{padding:.705em .778em .193em 0;content:"Q"}mjx-c.mjx-c48::before{padding:.683em .75em 0 0;content:"H"}mjx-mspace{display:inline-block;text-align:left}mjx-c.mjx-c28.TEX-S2::before{padding:1.15em .597em .649em 0;content:"("}mjx-c.mjx-c29.TEX-S2::before{padding:1.15em .597em .649em 0;content:")"}mjx-c.mjx-c25::before{padding:.75em .833em .056em 0;content:"%"}mjx-c.mjx-c2061::before{padding:0;content:""}mjx-mtable{display:inline-block;text-align:center;vertical-align:.25em;position:relative;box-sizing:border-box;border-spacing:0px;border-collapse:collapse}mjx-mstyle[size="s"] mjx-mtable{vertical-align:.354em}mjx-labels{position:absolute;left:0;top:0}mjx-table{display:inline-block;vertical-align:-.5ex;box-sizing:border-box}mjx-table>mjx-itable{vertical-align:middle;text-align:left;box-sizing:border-box}mjx-labels>mjx-itable{position:absolute;top:0}mjx-mtable[justify=left]{text-align:left}mjx-mtable[justify=right]{text-align:right}mjx-mtable[justify=left][side=left]{padding-right:0!important}mjx-mtable[justify=left][side=right]{padding-left:0!important}mjx-mtable[justify=right][side=left]{padding-right:0!important}mjx-mtable[justify=right][side=right]{padding-left:0!important}mjx-mtable[align]{vertical-align:baseline}mjx-mtable[align=top]>mjx-table{vertical-align:top}mjx-mtable[align=bottom]>mjx-table{vertical-align:bottom}mjx-mtable[side=right] mjx-labels{min-width:100%}mjx-mtr{display:table-row;text-align:left}mjx-mtr[rowalign=top]>mjx-mtd{vertical-align:top}mjx-mtr[rowalign=center]>mjx-mtd{vertical-align:middle}mjx-mtr[rowalign=bottom]>mjx-mtd{vertical-align:bottom}mjx-mtr[rowalign=baseline]>mjx-mtd{vertical-align:baseline}mjx-mtr[rowalign=axis]>mjx-mtd{vertical-align:.25em}mjx-mtd{display:table-cell;text-align:center;padding:.215em .4em}mjx-mtd:first-child{padding-left:0}mjx-mtd:last-child{padding-right:0}mjx-mtable>*>mjx-itable>:first-child>mjx-mtd{padding-top:0}mjx-mtable>*>mjx-itable>:last-child>mjx-mtd{padding-bottom:0}mjx-tstrut{display:inline-block;height:1em;vertical-align:-.25em}mjx-labels[align=left]>mjx-mtr>mjx-mtd{text-align:left}mjx-labels[align=right]>mjx-mtr>mjx-mtd{text-align:right}mjx-mtd[extra]{padding:0}mjx-mtd[rowalign=top]{vertical-align:top}mjx-mtd[rowalign=center]{vertical-align:middle}mjx-mtd[rowalign=bottom]{vertical-align:bottom}mjx-mtd[rowalign=baseline]{vertical-align:baseline}mjx-mtd[rowalign=axis]{vertical-align:.25em}mjx-mover{display:inline-block;text-align:left}mjx-mover:not([limits=false]){padding-top:.1em}mjx-mover:not([limits=false])>*{display:block;text-align:left}mjx-c.mjx-cA0::before{padding:0 .25em 0 0;content:" "}mjx-c.mjx-c1D719.TEX-I::before{padding:.694em .596em .205em 0;content:"ϕ"}mjx-c.mjx-c3B::before{padding:.43em .278em .194em 0;content:";"}mjx-c.mjx-c2207::before{padding:.683em .833em .033em 0;content:"∇"}mjx-c.mjx-c1D715::before{padding:.715em .566em .022em 0;content:"∂"}mjx-c.mjx-c5E::before{padding:.694em .5em 0 0;content:"^"}mjx-c.mjx-c2218::before{padding:.444em .5em 0 0;content:"∘"}mjx-c.mjx-c4C.TEX-C::before{padding:.705em .69em .022em 0;content:"L"}mjx-c.mjx-c1D6FC.TEX-I::before{padding:.442em .64em .011em 0;content:"α"}mjx-c.mjx-c1D6FE.TEX-I::before{padding:.441em .543em .216em 0;content:"γ"}mjx-c.mjx-c1D437.TEX-I::before{padding:.683em .828em 0 0;content:"D"}mjx-c.mjx-c1D716.TEX-I::before{padding:.431em .406em .011em 0;content:"ϵ"}mjx-c.mjx-c2D::before{padding:.252em .333em 0 0;content:"-"}mjx-c.mjx-c1D462.TEX-I::before{padding:.442em .572em .011em 0;content:"u"}mjx-c.mjx-c1D70F.TEX-I::before{padding:.431em .517em .013em 0;content:"τ"}mjx-c.mjx-c1D707.TEX-I::before{padding:.442em .603em .216em 0;content:"μ"}mjx-c.mjx-c1D70E.TEX-I::before{padding:.431em .571em .011em 0;content:"σ"}mjx-c.mjx-c3A6::before{padding:.683em .722em 0 0;content:"Φ"}mjx-c.mjx-c1D70C.TEX-I::before{padding:.442em .517em .216em 0;content:"ρ"}mjx-c.mjx-c50::before{padding:.683em .681em 0 0;content:"P"}mjx-c.mjx-c53::before{padding:.705em .556em .022em 0;content:"S"}mjx-c.mjx-c46::before{padding:.68em .653em 0 0;content:"F"}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-munderover{display:inline-block;text-align:left}mjx-munderover:not([limits=false]){padding-top:.1em}mjx-munderover:not([limits=false])>*{display:block}mjx-msubsup{display:inline-block;text-align:left}mjx-script{display:inline-block;padding-right:.05em;padding-left:.033em}mjx-script>mjx-spacer{display:block}mjx-mtext{display:inline-block;text-align:left}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c2032::before{padding:.56em .275em 0 0;content:"′"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c7C::before{padding:.75em .278em .249em 0;content:"|"}mjx-c.mjx-c1D44B.TEX-I::before{padding:.683em .852em 0 0;content:"X"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c2E::before{padding:.12em .278em 0 0;content:"."}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}mjx-c.mjx-c220F.TEX-S1::before{padding:.75em .944em .25em 0;content:"∏"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c22A5::before{padding:.668em .778em 0 0;content:"⊥"}mjx-c.mjx-c1D44C.TEX-I::before{padding:.683em .763em 0 0;content:"Y"}mjx-c.mjx-c2200::before{padding:.694em .556em .022em 0;content:"∀"}mjx-c.mjx-c3A::before{padding:.43em .278em 0 0;content:":"}mjx-c.mjx-c1D44D.TEX-I::before{padding:.683em .723em 0 0;content:"Z"}mjx-c.mjx-c1D467.TEX-I::before{padding:.442em .465em .011em 0;content:"z"}mjx-c.mjx-c1D448.TEX-I::before{padding:.683em .767em .022em 0;content:"U"}mjx-c.mjx-cD7::before{padding:.491em .778em 0 0;content:"×"}mjx-c.mjx-c37::before{padding:.676em .5em .022em 0;content:"7"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c2192::before{padding:.511em 1em .011em 0;content:"→"}mjx-c.mjx-c1D435.TEX-I::before{padding:.683em .759em 0 0;content:"B"}mjx-c.mjx-c1D439.TEX-I::before{padding:.68em .749em 0 0;content:"F"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c220F.TEX-S2::before{padding:.95em 1.278em .45em 0;content:"∏"}mjx-c.mjx-c43::before{padding:.705em .722em .021em 0;content:"C"}mjx-c.mjx-c61::before{padding:.448em .5em .011em 0;content:"a"}mjx-c.mjx-c76::before{padding:.431em .528em .011em 0;content:"v"}mjx-c.mjx-c69::before{padding:.669em .278em 0 0;content:"i"}mjx-c.mjx-c74::before{padding:.615em .389em .01em 0;content:"t"}mjx-c.mjx-c79::before{padding:.431em .528em .204em 0;content:"y"}mjx-c.mjx-c54::before{padding:.677em .722em 0 0;content:"T"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c68::before{padding:.694em .556em 0 0;content:"h"}mjx-c.mjx-c63::before{padding:.448em .444em .011em 0;content:"c"}mjx-c.mjx-c65::before{padding:.448em .444em .011em 0;content:"e"}mjx-c.mjx-c7B::before{padding:.75em .5em .25em 0;content:"{"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c7D::before{padding:.75em .5em .25em 0;content:"}"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c36::before{padding:.666em .5em .022em 0;content:"6"}mjx-c.mjx-c1D44F.TEX-I::before{padding:.694em .429em .011em 0;content:"b"}mjx-c.mjx-c1D457.TEX-I::before{padding:.661em .412em .204em 0;content:"j"}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c39::before{padding:.666em .5em .022em 0;content:"9"}mjx-c.mjx-c1D438.TEX-I::before{padding:.68em .764em 0 0;content:"E"}mjx-c.mjx-c1D43D.TEX-I::before{padding:.683em .633em .022em 0;content:"J"}mjx-c.mjx-c1D440.TEX-I::before{padding:.683em 1.051em 0 0;content:"M"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c1D442.TEX-I::before{padding:.704em .763em .022em 0;content:"O"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c338::before{padding:.716em 0 .215em;content:"̸"}mjx-c.mjx-c2190::before{padding:.511em 1em .011em 0;content:"←"}mjx-c.mjx-cAC::before{padding:.356em .667em 0 0;content:"¬"}mjx-c.mjx-c1D444.TEX-I::before{padding:.704em .791em .194em 0;content:"Q"}mjx-c.mjx-c72::before{padding:.442em .392em 0 0;content:"r"}mjx-c.mjx-c67::before{padding:.453em .5em .206em 0;content:"g"}mjx-c.mjx-c6D::before{padding:.442em .833em 0 0;content:"m"}mjx-c.mjx-c78::before{padding:.431em .528em 0 0;content:"x"}mjx-c.mjx-c1D45E.TEX-I::before{padding:.442em .46em .194em 0;content:"q"}mjx-c.mjx-c210E.TEX-I::before{padding:.694em .576em .011em 0;content:"h"}mjx-c.mjx-c2211.TEX-S1::before{padding:.75em 1.056em .25em 0;content:"∑"}mjx-c.mjx-c2208::before{padding:.54em .667em .04em 0;content:"∈"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c6E::before{padding:.442em .556em 0 0;content:"n"}mjx-c.mjx-c62::before{padding:.694em .556em .011em 0;content:"b"}mjx-c.mjx-c6C::before{padding:.694em .278em 0 0;content:"l"}mjx-c.mjx-c75::before{padding:.442em .556em .011em 0;content:"u"}mjx-c.mjx-c1D44A.TEX-I::before{padding:.683em 1.048em .022em 0;content:"W"}mjx-c.mjx-c2248::before{padding:.483em .778em 0 0;content:"≈"}mjx-c.mjx-c3C::before{padding:.54em .778em .04em 0;content:"<"}mjx-c.mjx-c38::before{padding:.666em .5em .022em 0;content:"8"}mjx-c.mjx-c3E::before{padding:.54em .778em .04em 0;content:">"}mjx-c.mjx-c1D446.TEX-I::before{padding:.705em .645em .022em 0;content:"S"}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c1D459.TEX-I::before{padding:.694em .298em .011em 0;content:"l"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c73::before{padding:.448em .394em .011em 0;content:"s"}mjx-c.mjx-c77::before{padding:.431em .722em .011em 0;content:"w"}mjx-c.mjx-c20::before{padding:0 .25em 0 0;content:" "}mjx-c.mjx-c66::before{padding:.705em .372em 0 0;content:"f"}mjx-c.mjx-c70::before{padding:.442em .556em .194em 0;content:"p"}mjx-c.mjx-c71::before{padding:.442em .528em .194em 0;content:"q"}mjx-c.mjx-c223C::before{padding:.367em .778em 0 0;content:"∼"}mjx-c.mjx-c41::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c57::before{padding:.683em 1.028em .022em 0;content:"W"}mjx-c.mjx-c4D::before{padding:.683em .917em 0 0;content:"M"}mjx-c.mjx-c45::before{padding:.68em .681em 0 0;content:"E"}mjx-c.mjx-c55::before{padding:.683em .75em .022em 0;content:"U"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D43C.TEX-I::before{padding:.683em .504em 0 0;content:"I"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c2205::before{padding:.772em .5em .078em 0;content:"∅"}mjx-c.mjx-c2265::before{padding:.636em .778em .138em 0;content:"≥"}mjx-c.mjx-c2260::before{padding:.716em .778em .215em 0;content:"≠"}mjx-c.mjx-c221E::before{padding:.442em 1em .011em 0;content:"∞"}mjx-c.mjx-c2026::before{padding:.12em 1.172em 0 0;content:"…"}mjx-c.mjx-c221D::before{padding:.442em .778em .011em 0;content:"∝"}mjx-c.mjx-c52::before{padding:.683em .736em .022em 0;content:"R"}mjx-c.mjx-c1D43E.TEX-I::before{padding:.683em .889em 0 0;content:"K"}mjx-c.mjx-c5B::before{padding:.75em .278em .25em 0;content:"["}mjx-c.mjx-c5D::before{padding:.75em .278em .25em 0;content:"]"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-msub{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-munder{display:inline-block;text-align:left}mjx-over{text-align:left}mjx-munder:not([limits=false]){display:inline-table}mjx-munder>mjx-row{text-align:left}mjx-under{padding-bottom:.1em}mjx-msup{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c1D464.TEX-I::before{padding:.443em .716em .011em 0;content:"w"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D465.TEX-I::before{padding:.442em .572em .011em 0;content:"x"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c2211.TEX-S2::before{padding:.95em 1.444em .45em 0;content:"∑"}mjx-c.mjx-c22C5::before{padding:.31em .278em 0 0;content:"⋅"}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c1D70B.TEX-I::before{padding:.431em .57em .011em 0;content:"π"}mjx-c.mjx-c1D703.TEX-I::before{padding:.705em .469em .01em 0;content:"θ"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="Query_Language_0">Query Language</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">如果我们自己来写数据库, 则查数据的时候, 就需要写:</p></div><div class="el-pre"><pre><code data-line="0">for (x in xxx){
	xxxxxx
}
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">对于大量的查询, 这是很容易出错的, 所以最好的方法就是用现存的一些已经写好的语法, 如SQL软件中的语法</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> name <span class="token keyword">FROM</span> Students <span class="token keyword">JOIN</span> Courses <span class="token keyword">WHERE</span> courseName <span class="token operator">=</span> <span class="token string">"Database"</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">比如上面的代码就是, 我们想找到所有的学生名字, 那些学生是来自Students数据库, 并且让Students数据和Courses数据关联, 再筛选出所有课名是<code>Database</code>的</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span> <span class="token comment">//列出所有数据库</span>
<span class="token keyword">use</span> xxx<span class="token punctuation">;</span> <span class="token comment">// 使用某个数据库</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span> <span class="token comment">//列出所有表格</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Modify Data" dir="auto" class="heading" id="Modify_Data_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Modify Data</h2></div><div class="el-h3"><h3 data-heading="Data Types" dir="auto" class="heading" id="Data_Types_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Data Types</h3></div><div class="el-p"><p dir="auto">My SQL支持很多中类型:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Integers - <code>[tiny, small, medium, big]int [unsigned]</code></li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Reals - float, double, decimal</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Dates - Date, datetime, timestamp, time, year</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Strings - char(m), varchar(m) - SQL中需要规定String的大小</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Blobs - Binary Large Objects - 可能是视频, 文件等</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>Enums </li>
</ul></div><div class="el-h3"><h3 data-heading="Create Table" dir="auto" class="heading" id="Create_Table_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Create Table</h3></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">(</span>
	<span class="token operator">&lt;</span>column1Name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token keyword">type</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>col properties<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token operator">&lt;</span>column2Name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token keyword">type</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>col properties<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token keyword">table</span> properties<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">用上面的代码可以创建出一个表格, <code>&lt;&gt;</code>表示的是占位符</p></div><div class="el-h4"><h4 data-heading="Column Constraints" dir="auto" class="heading" id="Column_Constraints_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Column Constraints</h4></div><div class="el-p"><p dir="auto">每列都可规定Column Properties, 比如</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">UNIQUE</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>
<span class="token keyword">DEFAULT</span> <span class="token punctuation">(</span>expression<span class="token punctuation">)</span>
<span class="token keyword">AUTO_INCREMENT</span> <span class="token comment">//设置数值是否自增</span>
<span class="token keyword">CHECK</span> <span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token comment">//检测此列数值是否在规定范围内</span>
<span class="token keyword">REFERENCES</span> reftable<span class="token punctuation">(</span>refcolumn<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">action</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">action</span><span class="token punctuation">]</span><span class="token comment">//把这列设成foreign key</span>
<span class="token comment">//最后两个指令有些MySQL上用不了, 虽然能执行, 但不会干任何事情, 通常把他们设成table wide pro</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="Table Constraints" dir="auto" class="heading" id="Table_Constraints_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Table Constraints</h4></div><div class="el-p"><p dir="auto">Table Constraints是写在表格的最后面, 并且我们可以给它一个名称:<code>CONSTRAINT constraint_name constraints</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">UNIQUE</span><span class="token punctuation">(</span>col_name <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>col_name <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>col_name <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h5"><h5 data-heading="Foreign Keys" dir="auto" class="heading" id="Foreign_Keys_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Foreign Keys</h5></div><div class="el-p"><p dir="auto">想要在SQL中用Foreign Key的话, 需要:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Foreign必须要有引用的key</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Foreign key和被引用的key必须要有同样的type</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>声明Foreign key的时候需要和声明被引用的key是同样的顺序, 如<code>PK(x, y)</code>就必须是<code>FK(x, y)</code></li>
</ul></div><div class="el-p"><p dir="auto">在mySQL中, 应该这么写::</p></div><div class="el-pre"><pre><code data-line="0">FOREIGN KEY(&lt;columns&gt;) 
REFERENCES &lt;table&gt;(&lt;table's key&gt;) 
ON DELETE &lt;action&gt;
ON UPDATE &lt;action&gt;
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">比如已经有了一个<code>t1</code>的表格, 然后想创建一个叫<code>ref1</code>的表格, 并且让<code>ref1</code>里的属性<code>a</code>引用<code>t1</code>里面的<code>x</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">create</span> <span class="token keyword">table</span> ref1<span class="token punctuation">(</span>a <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">references</span> t1<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这样操作之后, SQL就不会允许我们在<code>ref1</code>表格中插入<code>t1</code>的x没有的key了</p></div><div class="el-p"><p dir="auto">如果被ref的表格的key是由两个属性组成的, 则引用的时候需要同时写上这两个属性, 不然数据库会拒绝此操作(如<code>t2</code>的表格的<code>PK</code>是由<code>x,y</code>同时组成的)</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">create</span> <span class="token keyword">table</span> ref2<span class="token punctuation">(</span>a <span class="token keyword">int</span><span class="token punctuation">,</span> b <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span> <span class="token keyword">references</span> t2<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">delete</span> <span class="token keyword">cascade</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">上面还定义了删除会使用什么操作, 这里用的是<a data-tooltip-position="top" aria-label="Structured data > Referential Integrity" data-href="Structured data#Referential Integrity" href="cs5530/structured-data.html#Referential Integrity" class="internal-link" target="_self" rel="noopener nofollow">cascade</a>操作<br>
就算我们使用了<code>cascade</code>操作, 但如果想要drop(直接删除)这个被引用列的表格的时候, 数据库也会拒绝, 因为这样正在引用的数据库就没有意义了</p></div><div class="el-h3"><h3 data-heading="Modify Tables" dir="auto" class="heading" id="Modify_Tables_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Modify Tables</h3></div><div class="el-h4"><h4 data-heading="添加列:" dir="auto" class="heading" id="添加列_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>添加列:</h4></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span><span class="token keyword">table</span><span class="token operator">&gt;</span> <span class="token keyword">ADD</span> <span class="token operator">&lt;</span><span class="token keyword">column</span><span class="token operator">&gt;</span>
<span class="token comment">//eg:</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Title <span class="token keyword">ADD</span> PubDate <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">上面这个操作在添加完数据后, 因为我们设置了不允许NULL, 它已经存在的行的PubDate 会变成<code>DATE</code>数据类型的默认值:<code>0000-00-00</code></p></div><div class="el-h4"><h4 data-heading="修改列" dir="auto" class="heading" id="修改列_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>修改列</h4></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span><span class="token keyword">table</span><span class="token operator">&gt;</span> <span class="token keyword">MODIFY</span> <span class="token operator">&lt;</span><span class="token keyword">column</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span>new <span class="token keyword">type</span><span class="token operator">&gt;</span>
<span class="token comment">//eg:</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> Inventory <span class="token keyword">MODIFY</span> <span class="token keyword">Serial</span> <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="Foreign Key" dir="auto" class="heading" id="Foreign_Key_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Foreign Key</h4></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token comment">//添加 Foreign Key</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span><span class="token keyword">table</span><span class="token operator">&gt;</span> <span class="token keyword">ADD</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token keyword">columns</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token operator">&lt;</span><span class="token keyword">table</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">columns</span><span class="token punctuation">)</span>
<span class="token comment">//eg:</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>Phones<span class="token operator">&gt;</span> <span class="token keyword">ADD</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>CardNum<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token operator">&lt;</span>Patrons<span class="token operator">&gt;</span><span class="token punctuation">(</span>CardNum<span class="token punctuation">)</span>

<span class="token comment">//删除 Foreign Key</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span><span class="token keyword">table</span><span class="token operator">&gt;</span> <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token operator">&lt;</span>constraint_name<span class="token operator">&gt;</span>
<span class="token comment">//eg:</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token operator">&lt;</span>Phones<span class="token operator">&gt;</span> <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token operator">&lt;</span>cardnum_fk<span class="token operator">&gt;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Insert" dir="auto" class="heading" id="Insert_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Insert</h3></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token operator">&lt;</span><span class="token keyword">table</span> name<span class="token operator">&gt;</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这个意思就是把数据插入到表格中, <code>value1, 2...</code>表示的是插入一行数据, 一行的每列从左到右的值<br>
可以用<code>describe Table</code>来看这个表格的每列是什么</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token operator">&lt;</span><span class="token keyword">table</span> name<span class="token operator">&gt;</span> <span class="token punctuation">(</span>colX<span class="token punctuation">,</span> colY<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>value1<span class="token punctuation">,</span> value2<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">如果有些数据是系统生成的, 则可以用上面的代码 - 我们规定了只输入哪些列的值, 而没有填写的值会以设定的方式来填写(如自增或者NULL)</p></div><div class="el-h4"><h4 data-heading="On Duplicate Key" dir="auto" class="heading" id="On_Duplicate_Key_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>On Duplicate Key</h4></div><div class="el-p"><p dir="auto">有时候我们会想让SQL跟编程语言中的map一样: 如果不存在就创建, 如果存在就更新. 这个是支持的, 只要在指令后面跟上<code>ON DUPLICATE KEY UPDATE</code>就行<br>
如我们想添加一个玩家的ELO信息, ELO取最高值.</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">insert</span> <span class="token keyword">into</span> Players <span class="token punctuation">(</span>Name<span class="token punctuation">,</span> Elo<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">"So, Wesley"</span><span class="token punctuation">,</span> <span class="token number">2880</span><span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">DUPLICATE</span> <span class="token keyword">KEY</span> <span class="token keyword">UPDATE</span> Elo <span class="token operator">=</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">2880</span> <span class="token operator">&gt;</span> Elo<span class="token punctuation">,</span> <span class="token number">2880</span><span class="token punctuation">,</span> Elo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这里用的<code>IF</code>更像是三元运算符: 如果前面的条件是True, 值会变成2880, 否则则会保持不变(Elo)</p></div><div class="el-h3"><h3 data-heading="Delete" dir="auto" class="heading" id="Delete_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Delete</h3></div><div class="el-p"><p dir="auto">注意, 如果Delete指令没有写Where的话, 他会直接删除整个表格的所有行</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token operator">&lt;</span><span class="token keyword">Table</span> name<span class="token operator">&gt;</span> <span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">然而光这么删不会更新自增数字: 比如卡号5被删掉了, 新的卡号加进去会是6, 而不是补上5. 如果要更新自增数字, 就需要:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">alter</span> <span class="token keyword">table</span> Patrons <span class="token keyword">auto_increment</span><span class="token operator">=</span><span class="token number">5</span> 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Update" dir="auto" class="heading" id="Update_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Update</h3></div><div class="el-p"><p dir="auto">如果想要修改数据, 可以用Set关键词:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">UPDATE</span> <span class="token operator">&lt;</span><span class="token keyword">table</span> name<span class="token operator">&gt;</span> <span class="token keyword">SET</span> col1 <span class="token operator">=</span> val1<span class="token punctuation">,</span> col2 <span class="token operator">=</span> val2 <span class="token keyword">WHERE</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Retrieving Data" dir="auto" class="heading" id="Retrieving_Data_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Retrieving Data</h2></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> target<span class="token operator">-</span>list
<span class="token keyword">FROM</span> relation<span class="token operator">-</span>list
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> qualification<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token keyword">column</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">DESC</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">LIMIT</span> number<span class="token punctuation">]</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这是一条完整的SQL查询语句, 其中的<code>[]</code>表示的可以选填的数据</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Select: 选择某列, 也可以用星号<code>*</code>表示全部, 也叫wildcards</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Dinstinct: 表示过滤掉所有选出的列的重复的行</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>From: 表示选择的目标</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Where: 表示的是一些过滤条件, 条件是布尔表达式</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Order By: 根据某列来进行排列</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>Desc: 表示要降序排列</li>
<li data-line="6" dir="auto"><span class="list-bullet"></span>Limit: 返回的行的数量</li>
</ul></div><div class="el-h3"><h3 data-heading="Query by Instance" dir="auto" class="heading" id="Query_by_Instance_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Query by Instance</h3></div><div class="el-p"><p dir="auto">当我们想把某些数据筛选出来(如最老的几本书), 你可能会肉眼去看最老的几本是哪几本, 然后用<code>WHERE Serial &lt;= 1003</code>来得到. </p></div><div class="el-p"><p dir="auto">然而, 这种先知道答案再去查询的操作就是Query By Instance, 并且它是<strong>一个很坏的操作</strong>, 因为是依靠我们目前所知的信息去筛选的, 但凡数据稍微变化, 就会产生问题. </p></div><div class="el-p"><p dir="auto">实际上, 我们可以使用<code>Order By</code> + <code>LIMIT</code> 来寻找, 就算数据产生变化, 我们仍然可以知道最老的几本书是哪些</p></div><div class="el-p"><p dir="auto">当然, 请不要把Query By Instance和 "使用常数去筛选" 搞混, 前者是依靠我们的有限的信息去筛选, 而后者是我们本来就要去筛选这个, 如 "叫John的会员"</p></div><div class="el-h2"><h2 data-heading="Multiple Tables" dir="auto" class="heading" id="Multiple_Tables_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Multiple Tables</h2></div><div class="el-p"><p dir="auto">现在, 需要考虑的是如何查询带有关系的表格, 如一个表格Phones记录的Card num和Phone num, 另一个记录了Card Num和Name. 而现在想知道的是某个人的电话是什么</p></div><div class="el-p"><p dir="auto">这时候, 如果我们只用<code>SELECT</code>函数也是可以的, 不过这个操作是把表格合并起来, 不过合并的方式很简单粗暴: 就是把每个可能的组合都合并起来, 得到的新表格的行数就是两个旧表格行数的乘积, 所以这个操作也叫Cross Product</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Patrons<span class="token punctuation">,</span> Phones
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">可想而知, 这样会得到非常多的没用的数据. 这时候就要用<code>WHERE</code>筛选: </p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Patrons<span class="token punctuation">.</span>CardNum<span class="token punctuation">,</span> Name<span class="token punctuation">,</span> Phone <span class="token keyword">FROM</span> Patrons<span class="token punctuation">,</span> Phone
<span class="token keyword">WHERE</span> Patrons<span class="token punctuation">.</span>CardNum <span class="token operator">=</span> Phones<span class="token punctuation">.</span>CardNum
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">因为SQL表格不允许有重复的Attribute, 所以我们需要用表格标题来区分这个表格里重复的属性.</p></div><div class="el-p"><p dir="auto">在实际操作中, 是非常建议加上Filter的, 因为数据多起来, Cross Product的数量也会变得越来越多. 而加上过滤的话, 系统会先过滤, 然后再相乘</p></div><div class="el-p"><p dir="auto">实际上, 上面的这种写法就是同等与Join:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Patrons<span class="token punctuation">,</span> Phones
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Patrons <span class="token keyword">JOIN</span> Phones
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Patrons <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> Phones
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这三种写法完全一样, 都是创建一个临时的表格, 来存放生成出来的cross product</p></div><div class="el-p"><p dir="auto">相似的, 也可以用<code>on</code>来代替<code>where</code>:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Patrons<span class="token punctuation">.</span>CardNum<span class="token punctuation">,</span> Name<span class="token punctuation">,</span> Phone <span class="token keyword">FROM</span> Patrons<span class="token punctuation">,</span> Phone
<span class="token keyword">ON</span> Patrons<span class="token punctuation">.</span>CardNum <span class="token operator">=</span> Phones<span class="token punctuation">.</span>CardNum
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">不过, 这个<code>On</code> 只能用在<code>Join</code>后面, 且大部分时候都不太需要, 除非在某些<code>Outer Join</code>的情况下</p></div><div class="el-h3"><h3 data-heading="Natural Join" dir="auto" class="heading" id="Natural_Join_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Natural Join</h3></div><div class="el-p"><p dir="auto">上面的这种情况很常见, 所以就有个操作: Natural Join</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Patrons <span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> Phones<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">SQL会知道这两个表格相同的就是Card num, 然后会Join在一起, 并只显示一列. 如果两个表格里有两列相同的Attribute, 则Natural Join只会显示出两个Attribute 同时相等的一行</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">T1 <span class="token keyword">JOIN</span> T2 <span class="token keyword">WHERE</span> T1<span class="token punctuation">.</span>x <span class="token operator">=</span> T2<span class="token punctuation">.</span>x <span class="token operator">AND</span> T1<span class="token punctuation">.</span>y<span class="token operator">=</span>T2<span class="token punctuation">.</span>y
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Multiple Join" dir="auto" class="heading" id="Multiple_Join_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Multiple Join</h3></div><div class="el-p"><p dir="auto">看起来似乎Join只能连接两个表格, 实际上, 这个Join本质就是产生一个临时的新表格, 所以我们可以用多个Join来连接多个表格:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">Patrons <span class="token keyword">JOIN</span> CheckedOut <span class="token keyword">JOIN</span> Inventory
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h1"><h1 data-heading="Advanced Query Language" dir="auto" class="heading" id="Advanced_Query_Language_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Advanced Query Language</h1></div><div class="el-p"><p dir="auto">之前, 我们学了如何用<a data-href="Relational Algebra" href="cs5530/relational-algebra.html" class="internal-link" target="_self" rel="noopener nofollow">Relational Algebra</a>来更容易的写出查询某个数据的伪代码, 现在是时候把它变成SQL看得懂的代码了</p></div><div class="el-p"><p dir="auto">虽然没有一个模板, 可以把伪代码直接变成SQL, 但还是有一些规律的</p></div><div class="el-h2"><h2 data-heading="Relational Algebra -> SQL" dir="auto" class="heading" id="Relational_Algebra_->_SQL_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Relational Algebra -&gt; SQL</h2></div><div class="el-h3"><h3 data-heading="Select, Project" dir="auto" class="heading" id="Select,_Project_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Select, Project</h3></div><div class="el-p"><p dir="auto">首先, SQL不能没有<code>SELECT</code>, 对应的就是<code>π</code>. 不过就算关系代数里没有π, 也需要写<code>SELECT *</code>. </p></div><div class="el-p"><p dir="auto">然后, 我们的第二个基本符号就是<code>σ</code>, 它对应的就是<code>WHERE</code> 如:<br>
<span class="math math-block is-loaded"><mjx-container class="MathJax" jax="CHTML" display="true"><mjx-math display="true" class="MJX-TEX" style="margin-left: 0px; margin-right: 0px;"><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70B TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D436 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D451 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D462 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D70E TEX-I"></mjx-c></mjx-mi><mjx-script style="vertical-align: -0.15em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D441 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45A TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D452 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D437 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-script></mjx-msub><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D443 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D44E TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D461 TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45F TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45C TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45B TEX-I"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D460 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math></mjx-container></span></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> CardNum <span class="token keyword">FROM</span> Patrons <span class="token keyword">WHERE</span> Name <span class="token operator">=</span> <span class="token string">"Dan"</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Rename, Nested Queries" dir="auto" class="heading" id="Rename,_Nested_Queries_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Rename, Nested Queries</h3></div><div class="el-p"><p dir="auto">那么命名呢? SQL里其实也是有命名的</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>CardNum <span class="token keyword">from</span> Patrons p <span class="token keyword">WHERE</span> p<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">只需要在本来的名字后面跟着别名, 就可以完成命名(两个名字都可以使用)<br>
并且神奇的是, 就算在命名之前, 也是可以用这个别名的, 如上面的<code>p.CardNum</code></p></div><div class="el-p"><p dir="auto">上面只是命名整个表格, 我们还可以用<code>as</code>重命名某个列:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>CardNum <span class="token keyword">as</span> cn <span class="token keyword">from</span> Patrons p <span class="token keyword">WHERE</span> p<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这样, 输出的表格在显示出来的时候, 就会显示<code>cn</code>而不是<code>CardNum</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token keyword">Serial</span> <span class="token keyword">FROM</span>
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> ISBN <span class="token keyword">FROM</span> Titles <span class="token keyword">WHERE</span> Title <span class="token operator">=</span> <span class="token string">"The Lorax"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> lorax
<span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> Inventory<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">在SQL中也可以加括号, 然后再用as来给这个括号中得到的表格一个新名字. 虽然在上面的代码中, 我们没有用到我们起的lorax的名字的表格, 但这样做不仅是对我们有用, 更多的是为了避免SQL混淆</p></div><div class="el-h3"><h3 data-heading="Cross Product, Union" dir="auto" class="heading" id="Cross_Product,_Union_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Cross Product, Union</h3></div><div class="el-p"><p dir="auto">对于cross product<code>x</code>, 和<code>⋈</code> 都非常好表示, 其实就是<code>JOIN</code>和<code>NATURAL JOIN</code>. </p></div><div class="el-p"><p dir="auto">而Union 就稍微有点奇怪了. 比如我们现在有两个表格, 里面都有<code>Addr</code>属性, 现在我们想把他们合并成一个表格:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T1 <span class="token keyword">UNION</span> <span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T2
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">之所以说奇怪, 是因为这个SQL语句不是Nested Query, 但是它有两个<code>SELECT</code><br>
并且在合并的时候, SQL会自动去重, 除非我们写<code>UNION ALL</code>, 会允许重复出现</p></div><div class="el-p"><p dir="auto"> 还有一点奇怪的是, 假设T1和T2是可以直接合并的 - 也就是说两个表格的属性都是一样, 但我们还是不可以直接<code>Union</code>, 还是得<code>select * </code>才可以.</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">T1 <span class="token keyword">UNION</span> T2<span class="token punctuation">;</span> <span class="token comment">//WRONG</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> T1 <span class="token keyword">UNION</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> T2<span class="token punctuation">;</span><span class="token comment">//CORRECT</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">并且, SQL跟Relational Algebra不一样的是, SQL其实是不关心数据类型的, 比如我在指令中把ID和地址合并到一起了, 在Relational Algebra中做不到, 因为名不一样, 但SQL却可以, 虽然得到的数据可以说是没有太大的意义, 甚至连什么type都没有准确定义</p></div><div class="el-h3"><h3 data-heading="Intersection, Set Difference" dir="auto" class="heading" id="Intersection,_Set_Difference_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Intersection, Set Difference</h3></div><div class="el-p"><p dir="auto">虽然在SQL中定义了Intersection操作, 但在本节课的SQL服务器中, 并不存在这个指令.<br>
幸好的是, 在关系代数中就已经讨论过如何<a data-tooltip-position="top" aria-label="Relational Algebra > 稍微进阶" data-href="Relational Algebra#稍微进阶" href="cs5530/relational-algebra.html#稍微进阶" class="internal-link" target="_self" rel="noopener nofollow">用基本符号得到交集</a></p></div><div class="el-p"><p dir="auto">或者我们可以换一种思路, 如果直接把两个数据做Cross Product, 然后去看对应的数据有没有同样的, 如果同样就说明这行数据在交集中<br>
如:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T1<span class="token punctuation">)</span> <span class="token keyword">As</span> T1Addr <span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T2<span class="token punctuation">)</span> <span class="token keyword">As</span> T2Addr<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">或者, 可以用<strong>IN</strong>关键词. 这个<code>IN</code>就是跟在<code>Where</code>后面的, 表示我选的数据也需要在另外一组数据里面 </p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table1 <span class="token keyword">WHERE</span> x <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T1 <span class="token keyword">WHERE</span> Addr <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">需要注意的是, 这个In后面跟着的Nested Query并不需要像之前的Nested Query一样加上as去除混淆.</p></div><div class="el-p"><p dir="auto">这个<code>In</code>关键词本质就是拿着前者的每行数据去后者的列表中一行一行的去看, 如果在第二个表格中存在这个数据的话, 则把这个数据放到结果表格中</p></div><div class="el-p"><p dir="auto">Set Difference跟Intersection很相似: Intersection是去得到两个表格中都有的, Difference是去掉两个表格中都有的数据. 可以说Difference就是"Not Intersection"</p></div><div class="el-p"><p dir="auto">非常巧的是, 上面的<code>In</code>关键词是可以在前面跟着Not的 - 也就是说我们可以得到某个数据, 它不在我们指定的表格中.<br>
当然, Set Difference就是有先后顺序了, 比如我们想要让<code>T1 - T2</code>:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T1 <span class="token keyword">WHERE</span> Addr <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Addr <span class="token keyword">FROM</span> T2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Self Join" dir="auto" class="heading" id="Self_Join_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Self Join</h2></div><div class="el-p"><p dir="auto">现在, 有一个表格有id和手机号<br>
如果想要找到一个表格中有相同手机号的人该怎么办?</p></div><div class="el-p"><p dir="auto">其实, 这个问题可以用Self Join解决:<br>
如果我们把这个表格和自己Join, 就可以得到4列数据, 两列ID, 两列手机号.<br>
而现在不是要去看相同的ID的行, 而是看不同ID的行: 也就是如果两列的ID不相同, 但手机号却相同, 这样就找到了拥有相同手机号的不同的人</p></div><div class="el-p"><p dir="auto">但仔细一想: 如果Self Join的话, 就需要我们重命名一下表格, 因为如果两个表格完全一样, 那么得到的属性也会是完全一样的: <code>T1.a, T1.b, T1.a, T1.b</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> p1<span class="token punctuation">.</span>id<span class="token punctuation">,</span> p2<span class="token punctuation">.</span>id <span class="token keyword">FROM</span> Phones p1 <span class="token keyword">JOIN</span> Phones p2 <span class="token keyword">WHERE</span> p1<span class="token punctuation">.</span>id <span class="token operator">!=</span> p2<span class="token punctuation">.</span>id <span class="token operator">AND</span> p1<span class="token punctuation">.</span>phone <span class="token operator">=</span> p2<span class="token punctuation">.</span>phone
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Outter Join" dir="auto" class="heading" id="Outter_Join_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Outter Join</h2></div><div class="el-p"><p dir="auto">前面我们学过, 不管是<code>JOIN</code>还是<code>INNER JOIN</code>还是<code>T1, T2</code>, 得到的都是Inner Join, 也就是把前一个表格的每行和另外一个表格的每行组合到一起.</p></div><div class="el-p"><p dir="auto">但Outter Join不太一样: 它分为<code>LEFT JOIN</code>和<code>RIGHT JOIN</code>, 并且它还需要使用<code>ON</code>关键词</p></div><div class="el-p"><p dir="auto"><strong>LEFT JOIN</strong></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">T1 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> T2 <span class="token keyword">ON</span> condition
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">他会首先像<code>JOIN T2 ON ...</code>那样选出所有的满足条件的行, 并且还会附加上T1(前者表格)里的所有行</p></div><div class="el-p"><p dir="auto"><strong>RIGHT JOIN</strong></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">T1 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> T2 <span class="token keyword">ON</span> condition
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">可想而知, 他就是LEFT JOIN反过来: 先像JOIN那样选择所有满足条件的行, 然后再附加上T2表格中的所有行</p></div><div class="el-p"><p dir="auto">但具体有什么用呢?<br>
它可以显示出更多的信息, 比如有两个表格, 一个是所有图书馆会员的卡号, 另一个表是图书馆的卡借出去的书<br>
如果我们用</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> Patrons p <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> CheckedOut c <span class="token keyword">On</span> p<span class="token punctuation">.</span>id <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这样就可以得到所有会员的卡号, 并且如果有会员借了书的话, 还会包括这个会员借书的信息.<br>
由于我们用的是Left Join, 左边的表(会员表)不管有没有满足要求(不管借没借书)都会出现在表格中. SQL会把那些空的信息用NULL填充</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">Name</th>
<th dir="ltr">id</th>
<th dir="ltr">id</th>
<th dir="ltr">Book Serial</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr">Joe</td>
<td dir="auto">1</td>
<td dir="auto">1</td>
<td dir="auto">1001</td>
</tr>
<tr>
<td dir="ltr">Ann</td>
<td dir="auto">2</td>
<td dir="ltr">NULL</td>
<td dir="ltr">NULL</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">并且Left Join和Right Join都支持Natural关键词, 也就是说上面检测id是否相同可以直接用Natural省略掉</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> Patrons <span class="token keyword">NATURAL</span> <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> CheckedOut<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">通过上面的表格, 我们可以直接知道哪些人没有借书:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> Patrons <span class="token keyword">NATURAL</span> <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> CheckedOut <span class="token keyword">WHERE</span> Book_Serial <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token comment">//找出借书的人</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> Patrons <span class="token keyword">NATURAL</span> <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> CheckedOut <span class="token keyword">WHERE</span> Book_Serial <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">至于为什么需要是<code>IS NULL</code>而不是<code>=NULL</code>, 是因为它并不是一个值, 他是Three Value Logic中的一个Logic</p></div><div class="el-h2"><h2 data-heading="Three Value Logic" dir="auto" class="heading" id="Three_Value_Logic_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Three Value Logic</h2></div><div class="el-p"><p dir="auto">之前肯定学过Two Value Logic: 也就是True 和False. 而Three Value Logic就是在这基础上加上个<code>Unknown</code>, 表示的是它既不是true, 也不是False.<br>
在SQL中, <strong>NULL表示的就是Unknown</strong><br>
比如我们比较<code>5 = NULL</code>, 就好比我们问5是不是未知数一样, 答案也是未知的. </p></div><div class="el-p"><p dir="auto">在编程语言中, 我们肯定会认为这本来就不相等: 因为NULL它是空啊<br>
而在SQL中, 如果把一个数和未知数(NULL)作比较, 得到的永远是NULL. 如果我们把NULL和NULL做比较, 得到的也会是NULL. 这个<strong>NULL既不是True, 也不是False</strong>, 所以它不会满足任何条件.</p></div><div class="el-p"><p dir="auto">这就是为什么上面如果我们要查询一个数是不是空, 需要用<code>IS</code>, 而不是用<code>=</code></p></div><div class="el-p"><p dir="auto">有意思的是, 我们可以用已知数和未知数做运算, 比如<code>6+NULL</code>, 可想而知, 得到的也会是NULL</p></div><div class="el-p"><p dir="auto">那么问题就来了: 如果一个记录作业成绩的表格中有作业分, 还有一列是Extra Credit, 但如果学生没做额外作业, Extra Credit就是Null 而不是0.</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">sID</th>
<th dir="ltr">Score</th>
<th dir="ltr">Extra Credit</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="auto">1</td>
<td dir="auto">100</td>
<td dir="auto">10</td>
</tr>
<tr>
<td dir="auto">2</td>
<td dir="auto">85</td>
<td dir="ltr">NULL</td>
</tr>
<tr>
<td dir="auto">3</td>
<td dir="auto">80</td>
<td dir="auto">10</td>
</tr>
<tr>
<td dir="auto">4</td>
<td dir="auto">100</td>
<td dir="ltr">NULL</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">如果我们直接相加Score和Extra, 就会导致问题: <code>数字+未知数=未知数</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token punctuation">(</span>Score <span class="token operator">+</span> Extra<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Scores<span class="token punctuation">;</span> <span class="token comment">//可能返回NULL</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这就需要用到<code>COALESCE</code>函数. 这个函数会接受一系列参数, 会返回这一系列参数中第一个不是NULL的值.<code>COALESCE(NULL, NULL, 7, NULL, 15) -&gt; 7</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token punctuation">(</span>Score <span class="token operator">+</span> <span class="token keyword">COALESCE</span><span class="token punctuation">(</span>Extra<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Scores<span class="token punctuation">;</span> <span class="token comment">//不会返回NULL</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="String &amp; Date" dir="auto" class="heading" id="String_&amp;_Date_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>String &amp; Date</h2></div><div class="el-h3"><h3 data-heading="String" dir="auto" class="heading" id="String_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>String</h3></div><div class="el-p"><p dir="auto">在SQL中, 不仅仅可以用<code>=,&gt;,&lt;</code>等来比较字符串, 还可以用正则表达式来筛选字符串, 需要使用<code>LIKE</code>关键词</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> T1 <span class="token keyword">WHERE</span> Title <span class="token operator">LIKE</span> <span class="token string">'D_n%'</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这个<code>_</code>表示的是<strong>一个</strong>任意的字符, <code>%</code>表示的是<strong>0个或任意多个</strong>任意的字符<br>
不过SQL的"正则表达式" 肯定没有编程语言的那么牛逼</p></div><div class="el-h3"><h3 data-heading="Date" dir="auto" class="heading" id="Date_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Date</h3></div><div class="el-p"><p dir="auto">SQL中有Date和DateTime类型. 他们包含的数据有差别:</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th align="left" dir="ltr">DATE</th>
<th align="left" dir="ltr">DATETIME</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" dir="ltr">Year<br>Month<br>Day</td>
<td align="left" dir="ltr">Year<br>Month<br>Day<br>Hours<br>Minutes<br>Seconds</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">比如<code>DOB</code>是一个Date数据, 我们可以这么筛选:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> T1 <span class="token keyword">WHERE</span> DOB <span class="token operator">&gt;</span> <span class="token string">'1990-01-01'</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">虽然我们在拿一个Date和String作比较, 但是SQL很聪明, 可以把正确格式的String转换成Date</p></div><div class="el-p"><p dir="auto">由于Date还是符合类型, 所以可以访问其中的某个值:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span>DOB<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span>DOB<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">不止这些, SQL还有内置函数, 他可以把Date转换成其他格式:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">dayname<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">)</span> <span class="token comment">//告诉是星期几</span>
monthname<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">)</span> <span class="token comment">//告诉是几月</span>
dayofmonth<span class="token punctuation">(</span><span class="token keyword">date</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">SELECT</span> dayname<span class="token punctuation">(</span>DOB<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span> <span class="token comment">//返回所有学生的生日是周几</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">SQL还可以使用获取到的日期来直接进行运算:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2025</span> <span class="token operator">-</span> <span class="token keyword">year</span><span class="token punctuation">(</span>DOB<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">不过这个有一些问题: 因为我们只考虑的年份, 所以如果这个学生是3月出生, 但现在还是2月, 那么说明这个学生还没有到下一岁. 这样会导致学生在2月之后出生的都多算了一岁.</p></div><div class="el-p"><p dir="auto">实际上, 我们可以用SQL给我们专门用来算日期的函数<code>timestampdiff()</code></p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Name<span class="token punctuation">,</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">year</span><span class="token punctuation">,</span> DOB<span class="token punctuation">,</span> <span class="token string">'2025-02-02'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> Name<span class="token punctuation">,</span> timestampdiff<span class="token punctuation">(</span><span class="token keyword">year</span><span class="token punctuation">,</span> DOB<span class="token punctuation">,</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这个函数的第一个参数是结果显示的格式, 二和三参数是要做差的两个日期. 并且牛逼的是, 如果我们作差的格式是day, 它还会自动计算是不是闰年, 确保不会少几天</p></div><div class="el-p"><p dir="auto">或者直接用<code>curdate()</code>或者<code>now()</code>来获得今天的日期, 不过前者是Date, 后者返回的是DateTime. 当然这两个数据在这里都可以运行</p></div><div class="el-h2"><h2 data-heading="Aggregate Func, Group By, Having" dir="auto" class="heading" id="Aggregate_Func,_Group_By,_Having_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Aggregate Func, Group By, Having</h2></div><div class="el-h3"><h3 data-heading="Aggregate function" dir="auto" class="heading" id="Aggregate_function_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Aggregate function</h3></div><div class="el-p"><p dir="auto">Aggregate function是一系列函数, 用来计算表格的某个值, 通常只作用于表格的某一列</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token comment">//表格的行数</span>
<span class="token function">MAX</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token comment">//这一列的平均值</span>
<span class="token function">MIN</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> 
<span class="token function">SUM</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token function">AVG</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

<span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>ISBN<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Titles<span class="token punctuation">;</span> <span class="token comment">//返回Title表格中ISBN的数量</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">并且, 得到的是单独的一个数, 所以我们可以把最终结果当做一个值进行运算:<br>
比如想要求出Games里白方的胜率</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Games <span class="token keyword">WHERE</span> Result<span class="token operator">=</span><span class="token string">"W"</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Games<span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Group By" dir="auto" class="heading" id="Group_By_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Group By</h3></div><div class="el-p"><p dir="auto">如果单用<code>GROUP BY</code>这个关键词, 他会先用指定的数据进行分组, 然后对于每组选出一个数据表示这个组. 如果只用<code>Group By</code>的话, 它跟distinct的作用是一样的: </p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Major <span class="token keyword">FROM</span> Students <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Major<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> Major <span class="token keyword">FROM</span> Students<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这两行命令都是返回一列Major数据, 然后每行是一个不重复的Major</p></div><div class="el-p"><p dir="auto">但如果我们搭配Aggregate function的时候, Group By就会开始变得有用起来了.<br>
由于我们用了分组, 所以如果查询语句中还有Aggregate function, 他会给每组分别进行Aggregate操作:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Major<span class="token punctuation">,</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Students <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Major<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这样我们会得到一张表格:</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">Major</th>
<th dir="ltr">Count(*)</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr">CS</td>
<td dir="auto">2</td>
</tr>
<tr>
<td dir="ltr">ART</td>
<td dir="auto">2</td>
</tr>
<tr>
<td dir="ltr">PHYS</td>
<td dir="auto">1</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">它表示的就是每个专业分别有多少人</p></div><div class="el-p"><p dir="auto">通常来说, 因为这些数据都是代表整个组的, 所以我们通常是会展示出Aggregate的结果和分组的依据(如这里的Major). 如果我们用把语句中的第一个Major换成Name, 则这个结果就没有太大的意义了.<br>
因为如果用显示Major和Count, 不管选出的数据随机到组里的哪个, 都能代表整个组的数据</p></div><div class="el-p"><p dir="auto">需要注意的是, <code>Count()</code>的参数并不总是可以用<code>*</code>, <code>*</code>表示的是任意一列只要有数据就行. 但如果我们用<code>Student Left JOIN Enroll</code>, 可能会得到含有Null的表格 - 如果某些学生没有参加任何课程的话.<br>
这时候如果想统计每个学生报了几节课, 就需要用<code>count(cID)</code>这种了, 因为如果学生没有报课, 则<code>Left Join</code>之后他的<code>cID</code>那一列会是null. </p></div><div class="el-h3"><h3 data-heading="Having" dir="auto" class="heading" id="Having_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Having</h3></div><div class="el-p"><p dir="auto">当有统计了每节课有多少学生后, 如果有很多很多课, 但我只想找到那些学生数量大于5的课, 该怎么办?</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> cID<span class="token punctuation">,</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Enroll <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cID <span class="token keyword">WHERE</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">//WRONG</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">然而, SQL不会允许我们对Aggregate function得到的结果使用<code>Where</code>进行筛选, 甚至<code>Where</code>关键词需要在<code>Group by</code>之前, 因为SQL允许的是我们是先对数据进行筛选, 再进行分组</p></div><div class="el-p"><p dir="auto">正确的是去使用<code>Having</code>关键词. </p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> cID<span class="token punctuation">,</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> Enroll <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cID <span class="token keyword">Having</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> cID<span class="token punctuation">,</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> c <span class="token keyword">FROM</span> Enroll <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cID <span class="token keyword">Having</span> c <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">由于不想在语句中重复使用两次Aggregate function, 我们可以<a data-tooltip-position="top" aria-label="Query Language > Rename, Nested Queries" data-href="Query Language#Rename, Nested Queries" href="cs5530/query-language.html#Rename,_Nested_Queries_0" class="internal-link" target="_self" rel="noopener nofollow">重命名列</a>来化简.</p></div><div class="el-p"><p dir="auto">具体来说, Having是用来筛选组的, 而Where是专门用来筛选行的</p></div><div class="el-h3"><h3 data-heading="Aggregate + Tuples" dir="auto" class="heading" id="Aggregate_+_Tuples_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Aggregate + Tuples</h3></div><div class="el-p"><p dir="auto">请记住, Aggregate 函数不是返回某行, 而是通过表格的数据运算后返回一个数据<br>
但是, Group关键词分完组后, 给的是这个组中随机一行的数据. </p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Dept<span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>Price<span class="token punctuation">)</span><span class="token punctuation">,</span> Name <span class="token keyword">FROM</span> Items <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Dept<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">比如上面的代码中尝试使用Group by + Aggregate函数来得到每个部门的最便宜的物品名字和价格.<br>
但这个代码实际上是错的, 因为除了<code>Min()</code>返回的是通过整个Group计算的数据(是正确的), 剩下的两个数据完全就是在组中随机挑选的值.<br>
由于是通过部门的名字分组, 所以部门也是正确的, 但每个商品的名字不同, 就导致名字很可能是错误的值.</p></div><div class="el-p"><p dir="auto">实际上, 由于我们已经知道了最小值, 我们可以再把得到的表格<code>Join</code>到原来的表格, 然后去Match到正确的名字.<br>
如找到每个专业里最老的学生的名字:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> Name <span class="token keyword">FROM</span> Students <span class="token keyword">Join</span> 
<span class="token punctuation">(</span><span class="token keyword">SELECT</span> Major<span class="token punctuation">,</span> <span class="token function">MIN</span><span class="token punctuation">(</span>DOB<span class="token punctuation">)</span> <span class="token keyword">AS</span> dob <span class="token keyword">FROM</span> Students <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Major<span class="token punctuation">)</span> <span class="token keyword">AS</span> oldest 
<span class="token keyword">WHERE</span> oldest<span class="token punctuation">.</span>dob <span class="token operator">=</span> Students<span class="token punctuation">.</span>dob <span class="token operator">and</span> oldest<span class="token punctuation">.</span>Major <span class="token operator">=</span> Students<span class="token punctuation">.</span>Major<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">上面的语句是先把学生按照专业分组, 找到每个专业最老的学生的出生日期, 并把得到的表格命名为oldest, 然后再让oldest表格和Student表格叉乘, 再根据出生日期和专业筛选就可以了</p></div><div class="el-h3"><h3 data-heading="Aggregate of Aggregate" dir="auto" class="heading" id="Aggregate_of_Aggregate_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Aggregate of Aggregate</h3></div><div class="el-p"><p dir="auto">如果想要找出学校专业的人数的平均值, 就可以通过Nested Query来做两次Aggregate:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> c <span class="token keyword">FROM</span> Students <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> Major<span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">temp</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Case" dir="auto" class="heading" id="Case_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Case</h2></div><div class="el-p"><p dir="auto">这个就像是Switch语句, 可以生成一个新列, 这列的每行是根据这行的其他数据得到的:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> sID<span class="token punctuation">,</span> cID<span class="token punctuation">,</span>
<span class="token keyword">CASE</span>
	<span class="token keyword">WHEN</span> Grade <span class="token operator">LIKE</span> <span class="token string">'A%'</span> <span class="token keyword">THEN</span> <span class="token string">'Superior'</span>
	<span class="token keyword">WHEN</span> Grade <span class="token operator">LIKE</span> <span class="token string">'B%'</span> <span class="token keyword">THEN</span> <span class="token string">'Good'</span>
	<span class="token keyword">WHEN</span> Grade <span class="token operator">LIKE</span> <span class="token string">'C%'</span> <span class="token keyword">THEN</span> <span class="token string">'Adequate'</span>
	<span class="token keyword">else</span> <span class="token string">'Poor'</span>
<span class="token keyword">END</span> <span class="token keyword">AS</span> Remarks
<span class="token keyword">FROM</span> Enrolled<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这样, 我们会得到一个表格, 三列分别是学号和课号, 还有对应的"Remarks", 这个Remarks就是通过成绩来进行判断得来的</p></div><div class="el-p"><p dir="auto">如果我们判断的是分数, 或者年龄等, 那应该是按照顺序判断, 因为这个Case是从上到下判断的, 遇到的第一个满足条件的就会执行</p></div><div class="el-h2"><h2 data-heading="AS" dir="auto" class="heading" id="AS_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>AS</h2></div><div class="el-p"><p dir="auto">上面有些地方用 AS, 有些地方有不用, 下面是一个表格说了那些需要用, 哪些不需要:</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">使用位置</th>
<th dir="ltr">是否需要 <code>AS subquery</code></th>
<th dir="ltr">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr"><code>FROM (子查询)</code></td>
<td dir="ltr">✅ <strong>必须</strong></td>
<td dir="ltr">作为临时表使用，MySQL 需要它有名称</td>
</tr>
<tr>
<td dir="ltr"><code>JOIN (子查询)</code></td>
<td dir="ltr">✅ <strong>必须</strong></td>
<td dir="ltr">作为被连接的表，必须有名称</td>
</tr>
<tr>
<td dir="ltr"><code>WITH (子查询)</code></td>
<td dir="ltr">✅ <strong>必须</strong></td>
<td dir="ltr">需要给临时表命名</td>
</tr>
<tr>
<td dir="ltr"><code>WHERE (子查询)</code></td>
<td dir="ltr">❌ <strong>不需要</strong></td>
<td dir="ltr">子查询返回单个值</td>
</tr>
<tr>
<td dir="ltr"><code>HAVING (子查询)</code></td>
<td dir="ltr">❌ <strong>不需要</strong></td>
<td dir="ltr">子查询返回单个值</td>
</tr>
</tbody>
</table></div><div class="el-h2"><h2 data-heading="Condition Operators" dir="auto" class="heading" id="Condition_Operators_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Condition Operators</h2></div><div class="el-p"><p dir="auto">Condition Operators就是之前用在Where后面的. 不仅仅是<code>x &gt; 5</code>这种是在查询Condition, 使用<a data-tooltip-position="top" aria-label="Query Language > ^24d577" data-href="Query Language#^24d577" href="cs5530/query-language.html#^24d577" class="internal-link" target="_self" rel="noopener nofollow">in</a>的时候, 也可以说是Condition, 因为它也是跟在Where后面的, 如:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">select</span> x <span class="token keyword">from</span> y <span class="token keyword">where</span> x <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这个in 不仅仅可以是个nested Query (某些操作会返回多行数据), 还可以是hard coded的值.</p></div><div class="el-p"><p dir="auto">除了<code>in</code>之外, 还有一些对于Nested Query的Condition:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded">x <span class="token operator">IN</span> A     <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token boolean">true</span> <span class="token keyword">if</span> x <span class="token operator">in</span> A
<span class="token keyword">EXISTS</span> A   <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token boolean">true</span> <span class="token keyword">if</span> A <span class="token operator">is</span> <span class="token operator">not</span> empty
x OP <span class="token keyword">ANY</span> A <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token boolean">true</span><span class="token punctuation">,</span> 如果A中的任意一个数据y<span class="token punctuation">,</span> x OP y <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">(</span>这里OP是运算符如<span class="token string">"="</span><span class="token punctuation">)</span>
               比如 x <span class="token operator">&gt;</span> <span class="token keyword">ANY</span> A 表示的只要x比A中任意值大就是<span class="token boolean">true</span>
x OP <span class="token keyword">ALL</span> A <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token boolean">true</span><span class="token punctuation">,</span> 如果A中的所有数据<span class="token punctuation">,</span> 每个数据x OP y <span class="token operator">=</span> <span class="token boolean">true</span>
			   比如 x <span class="token operator">&gt;</span> <span class="token keyword">ALL</span> A 表示x必须比A中的所有值都大才是<span class="token boolean">true</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3"><h3 data-heading="Exists" dir="auto" class="heading" id="Exists_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Exists</h3></div><div class="el-p"><p dir="auto">有了它, 就可以做<a data-tooltip-position="top" aria-label="Relational Algebra > Division Operator" data-href="Relational Algebra#Division Operator" href="cs5530/relational-algebra.html#Division Operator" class="internal-link" target="_self" rel="noopener nofollow">division</a>的操作了:<br>
比如我们想找出有没有学生把所有课都上了: 就可以先去看course (c)表, 得到所有课程的<code>cID</code>, 然后去看enroll (e)表 中的哪个学生同时拥有所有的<code>cID</code>就可以了<br>
在SQL中, 可以这么做:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">select</span> s<span class="token punctuation">.</span>sName
<span class="token keyword">from</span> Students s
<span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> c<span class="token punctuation">.</span>cID
				  <span class="token keyword">from</span> Courses c
				  <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> e<span class="token punctuation">.</span>cID
									 <span class="token keyword">from</span> Enrolled e
									 <span class="token keyword">where</span> e<span class="token punctuation">.</span>cID <span class="token operator">=</span> c<span class="token punctuation">.</span>cID
									 <span class="token operator">and</span> e<span class="token punctuation">.</span>sID <span class="token operator">=</span> s<span class="token punctuation">.</span>sID<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这里的格式显示出它是三个nested select, 可以把他想象成三个嵌套着的 for循环.<br>
<code>from Students s</code> 可以看作是<code>foreach Student s</code>, 剩下的是<code>foreach Course c</code>...</p></div><div class="el-p"><p dir="auto">在最里层的循环, 我们就跟正常代码的循环一样, 拥有了<code>s, c, e</code>的信息</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>cID <span class="token keyword">FROM</span> Enrolled e <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>cID <span class="token operator">=</span> c<span class="token punctuation">.</span>cID <span class="token operator">AND</span> e<span class="token punctuation">.</span>sID <span class="token operator">=</span> s<span class="token punctuation">.</span>sID<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">最里层的代码用伪代码展开就是这样的:</p></div><div class="el-pre"><pre class="language-java"><code data-line="0" class="language-java is-loaded"><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Student</span> s in <span class="token class-name">Students_Table</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Course</span> c in <span class="token class-name">Courses_Table</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Enrolled</span> e in <span class="token class-name">Enrolled_Table</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>cID <span class="token operator">==</span> c<span class="token punctuation">.</span>cID <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>sID <span class="token operator">==</span> s<span class="token punctuation">.</span>sID<span class="token punctuation">)</span> add <span class="token keyword">this</span> row 
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">可以比作是循环Enroll表中的每个Enroll行, 如果不等于当前循环的学生id和课号, 则不返回当前行.</p></div><div class="el-p"><p dir="auto">第二个循环就是</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> c<span class="token punctuation">.</span>cID <span class="token keyword">FROM</span> Courses c <span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">因为我们用的是<code>Not Exists</code>, 表示的是内循环返回必须没有返回任何行<br>
说人话就是只要学生没参加当前循环的这个课, 则把这个课返回.</p></div><div class="el-p"><p dir="auto">最后一个循环是</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">select</span> s<span class="token punctuation">.</span>sName <span class="token keyword">from</span> Students s <span class="token keyword">where</span> <span class="token operator">not</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">也就是说, 第二层循环返回了这个学生没有参加的所有的课, 而最外层循环则是再去检测当前的学生得到的 "没有参加的课" 的表是不是空的. 如果不是, 则不添加这个学生. </p></div><div class="el-p"><p dir="auto">这样, 就可以得到参加了所有课的学生的名字了.</p></div><div class="el-h2"><h2 data-heading="Modify Data" dir="auto" class="heading" id="Modify_Data_1"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Modify Data</h2></div><div class="el-h3"><h3 data-heading="Dynamic deletion" dir="auto" class="heading" id="Dynamic_deletion_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Dynamic deletion</h3></div><div class="el-p"><p dir="auto">在之前学过如何删除数据<a data-tooltip-position="top" aria-label="Query Language > Delete" data-href="Query Language#Delete" href="cs5530/query-language.html#Delete_0" class="internal-link" target="_self" rel="noopener nofollow">Delete</a>. 当然, <code>WHERE ... = x</code>这个指令的x不仅仅可以是一个数, 还可以是一个sub query, 就像上面AS的部分说的. </p></div><div class="el-p"><p dir="auto">比如我们可以写一个SQL指令是: 移除Joe在Checked out的所有的书(Joe的id是1).</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">delete</span> <span class="token keyword">from</span> CheckedOut <span class="token keyword">where</span> CardNum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这种是query by instance, 当然不想这么干, 我们可以用个子查询先查出Joe的ID是多少, 然后再进行删除:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">delete</span> <span class="token keyword">from</span> CheckedOut <span class="token keyword">where</span> CardNum <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> CardNum <span class="token keyword">from</span> Patrons <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">但这种操作对于多个目标的时候就不能用了: 因为"="只能作用于单个数值比较. 对于比较多个数据, 我们需要用<a data-tooltip-position="top" aria-label="Query Language > ^24d577" data-href="Query Language#^24d577" href="cs5530/query-language.html#^24d577" class="internal-link" target="_self" rel="noopener nofollow">in</a>关键词</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">delete</span> <span class="token keyword">from</span> CheckedOut <span class="token keyword">where</span> CardNum <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> CardNum <span class="token keyword">from</span> Patrons <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span> <span class="token operator">or</span> Name <span class="token operator">=</span> <span class="token string">"Dan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">聪明的你可能发现: 为什么不用Join, 然后再删除? 这种操作看起来是可以的, 实际上是不行: 因为joint是生成一个临时表格, 但删除这个临时表格是没有意义的:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">delete</span> <span class="token keyword">from</span> CheckedOut <span class="token keyword">natural</span> <span class="token keyword">join</span> <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">;</span> <span class="token comment">//Wrong</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">不过我们可以稍加修改, 来让他符合我们的要求:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">delete</span> CheckedOut <span class="token keyword">from</span> CheckedOut <span class="token keyword">natural</span> <span class="token keyword">join</span> <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">;</span> <span class="token comment">//Wrong</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这里, 我们是告诉SQL, 在<code>Natural Join</code>中符合要求的行, 对应到<code>CheckedOut</code>表格, 就是我们想要的数据.</p></div><div class="el-h3"><h3 data-heading="Dynamic Insert" dir="auto" class="heading" id="Dynamic_Insert_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Dynamic Insert</h3></div><div class="el-p"><p dir="auto">知道了怎么删除, 现在来看怎么添加数据. 假设Joe借了Lorax这本书, 我们想在<code>CheckedOut</code>中添加这个信息, 但这个是比较困难的, 因为<code>CheckedOut</code>表格中只有<code>CardNum</code>和<code>Serial</code>, 我们不能直接知道<code>Lorax</code>的序列号, 还有<code>Joe</code>的<code>CardNum</code></p></div><div class="el-p"><p dir="auto">实际上, Insert操作和Delete操作差不多, 里面的数据不仅可以是固定的数值, 也可以是Nested Query:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">insert</span> <span class="token keyword">into</span> CheckedOut <span class="token keyword">values</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> CheckedOut <span class="token keyword">values</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> CheckedOut <span class="token keyword">values</span><span class="token punctuation">(</span> 
<span class="token punctuation">(</span><span class="token keyword">select</span> CardNum <span class="token keyword">from</span> Patrons <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">Serial</span> <span class="token keyword">from</span> Titles <span class="token keyword">natural</span> <span class="token keyword">join</span> Inventory <span class="token keyword">where</span> Title <span class="token operator">=</span> <span class="token string">"Lorax"</span> <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">比如上面的第三条, 就能让我们添加<code>Joe</code>借了<code>Lorax</code>这本书的信息.</p></div><div class="el-p"><p dir="auto">不过这又有了个问题: 如果还有一个人要借这个<code>Lorax</code>, 虽然Inventory里有两本这个书, 但上面这个Query只会返回第一个<code>Lorax</code>. 所以我们还需要把这个指令修改一下, 这样它不会选择那些已经被Checked out的书</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">insert</span> <span class="token keyword">into</span> CheckedOut <span class="token keyword">values</span><span class="token punctuation">(</span> 
<span class="token punctuation">(</span><span class="token keyword">select</span> CardNum <span class="token keyword">from</span> Patrons <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">Serial</span> <span class="token keyword">from</span> Titles <span class="token keyword">natural</span> <span class="token keyword">join</span> Inventory <span class="token keyword">where</span> Title <span class="token operator">=</span> <span class="token string">"Lorax"</span> 
<span class="token operator">and</span> <span class="token keyword">Serial</span> <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">Serial</span> <span class="token keyword">from</span> CheckedOut<span class="token punctuation">)</span> <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这里, 我们通过添加一个<code>and</code>连接一个<code>not in</code>条件来限制<br>
不过上面的代码还是有一个问题: 如果没有任何<code>Lorax</code>可以借, 那么那么SQL会直接报错.<br>
因为如果没有书的话, 第二个Sub Query会返回一个NULL, 然后就表示我们试图把一个Null和一个数据添加到CheckedOut中. </p></div><div class="el-p"><p dir="auto">如果我们不想直接报错(放到程序中会使程序崩溃), 而是给个警告的话, 就可以在开头添加一个<code>ignore</code>:</p></div><div class="el-pre"><pre class="language-sql"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">insert</span> <span class="token keyword">ignore</span> <span class="token keyword">into</span> CheckedOut <span class="token keyword">values</span><span class="token punctuation">(</span> 
<span class="token punctuation">(</span><span class="token keyword">select</span> CardNum <span class="token keyword">from</span> Patrons <span class="token keyword">where</span> Name <span class="token operator">=</span> <span class="token string">"Joe"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">Serial</span> <span class="token keyword">from</span> Titles <span class="token keyword">natural</span> <span class="token keyword">join</span> Inventory <span class="token keyword">where</span> Title <span class="token operator">=</span> <span class="token string">"Lorax"</span> <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">这样, SQL就会遇到问题会记录下来, 使用<code>show warnings;</code>指令可以查看触发的警告</p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Query_Language_0" data-path="#Query_Language_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Query Language">Query Language</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Modify_Data_0" data-path="#Modify_Data_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Modify Data">Modify Data</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Data_Types_0" data-path="#Data_Types_0"><div class="tree-item-inner heading-link" heading-name="Data Types">Data Types</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Create_Table_0" data-path="#Create_Table_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Create Table">Create Table</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Column_Constraints_0" data-path="#Column_Constraints_0"><div class="tree-item-inner heading-link" heading-name="Column Constraints">Column Constraints</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="4"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Table_Constraints_0" data-path="#Table_Constraints_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Table Constraints">Table Constraints</div></a><div class="tree-item-children"><div class="tree-item" data-depth="5"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Foreign_Keys_0" data-path="#Foreign_Keys_0"><div class="tree-item-inner heading-link" heading-name="Foreign Keys">Foreign Keys</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Modify_Tables_0" data-path="#Modify_Tables_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Modify Tables">Modify Tables</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#添加列_0" data-path="#添加列_0"><div class="tree-item-inner heading-link" heading-name="添加列:">添加列:</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#修改列_0" data-path="#修改列_0"><div class="tree-item-inner heading-link" heading-name="修改列">修改列</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Foreign_Key_0" data-path="#Foreign_Key_0"><div class="tree-item-inner heading-link" heading-name="Foreign Key">Foreign Key</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Insert_0" data-path="#Insert_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Insert">Insert</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#On_Duplicate_Key_0" data-path="#On_Duplicate_Key_0"><div class="tree-item-inner heading-link" heading-name="On Duplicate Key">On Duplicate Key</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Delete_0" data-path="#Delete_0"><div class="tree-item-inner heading-link" heading-name="Delete">Delete</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Update_0" data-path="#Update_0"><div class="tree-item-inner heading-link" heading-name="Update">Update</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Retrieving_Data_0" data-path="#Retrieving_Data_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Retrieving Data">Retrieving Data</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Query_by_Instance_0" data-path="#Query_by_Instance_0"><div class="tree-item-inner heading-link" heading-name="Query by Instance">Query by Instance</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Multiple_Tables_0" data-path="#Multiple_Tables_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Multiple Tables">Multiple Tables</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Natural_Join_0" data-path="#Natural_Join_0"><div class="tree-item-inner heading-link" heading-name="Natural Join">Natural Join</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Multiple_Join_0" data-path="#Multiple_Join_0"><div class="tree-item-inner heading-link" heading-name="Multiple Join">Multiple Join</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Advanced_Query_Language_0" data-path="#Advanced_Query_Language_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Advanced Query Language">Advanced Query Language</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Relational_Algebra_->_SQL_0" data-path="#Relational_Algebra_->_SQL_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Relational Algebra -> SQL">Relational Algebra -&gt; SQL</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Select,_Project_0" data-path="#Select,_Project_0"><div class="tree-item-inner heading-link" heading-name="Select, Project">Select, Project</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Rename,_Nested_Queries_0" data-path="#Rename,_Nested_Queries_0"><div class="tree-item-inner heading-link" heading-name="Rename, Nested Queries">Rename, Nested Queries</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Cross_Product,_Union_0" data-path="#Cross_Product,_Union_0"><div class="tree-item-inner heading-link" heading-name="Cross Product, Union">Cross Product, Union</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Intersection,_Set_Difference_0" data-path="#Intersection,_Set_Difference_0"><div class="tree-item-inner heading-link" heading-name="Intersection, Set Difference">Intersection, Set Difference</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Self_Join_0" data-path="#Self_Join_0"><div class="tree-item-inner heading-link" heading-name="Self Join">Self Join</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Outter_Join_0" data-path="#Outter_Join_0"><div class="tree-item-inner heading-link" heading-name="Outter Join">Outter Join</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Three_Value_Logic_0" data-path="#Three_Value_Logic_0"><div class="tree-item-inner heading-link" heading-name="Three Value Logic">Three Value Logic</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#String_&amp;_Date_0" data-path="#String_&amp;_Date_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="String &amp; Date">String &amp; Date</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#String_0" data-path="#String_0"><div class="tree-item-inner heading-link" heading-name="String">String</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Date_0" data-path="#Date_0"><div class="tree-item-inner heading-link" heading-name="Date">Date</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Aggregate_Func,_Group_By,_Having_0" data-path="#Aggregate_Func,_Group_By,_Having_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Aggregate Func, Group By, Having">Aggregate Func, Group By, Having</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Aggregate_function_0" data-path="#Aggregate_function_0"><div class="tree-item-inner heading-link" heading-name="Aggregate function">Aggregate function</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Group_By_0" data-path="#Group_By_0"><div class="tree-item-inner heading-link" heading-name="Group By">Group By</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Having_0" data-path="#Having_0"><div class="tree-item-inner heading-link" heading-name="Having">Having</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Aggregate_+_Tuples_0" data-path="#Aggregate_+_Tuples_0"><div class="tree-item-inner heading-link" heading-name="Aggregate + Tuples">Aggregate + Tuples</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Aggregate_of_Aggregate_0" data-path="#Aggregate_of_Aggregate_0"><div class="tree-item-inner heading-link" heading-name="Aggregate of Aggregate">Aggregate of Aggregate</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Case_0" data-path="#Case_0"><div class="tree-item-inner heading-link" heading-name="Case">Case</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#AS_0" data-path="#AS_0"><div class="tree-item-inner heading-link" heading-name="AS">AS</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Condition_Operators_0" data-path="#Condition_Operators_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Condition Operators">Condition Operators</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Exists_0" data-path="#Exists_0"><div class="tree-item-inner heading-link" heading-name="Exists">Exists</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cs5530/query-language.html#Modify_Data_1" data-path="#Modify_Data_1"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Modify Data">Modify Data</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Dynamic_deletion_0" data-path="#Dynamic_deletion_0"><div class="tree-item-inner heading-link" heading-name="Dynamic deletion">Dynamic deletion</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cs5530/query-language.html#Dynamic_Insert_0" data-path="#Dynamic_Insert_0"><div class="tree-item-inner heading-link" heading-name="Dynamic Insert">Dynamic Insert</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>