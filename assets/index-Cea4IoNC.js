const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/theme-ocean-DpaLo3-r.js","assets/vendor-three-C29NQ9Z3.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=o(t);fetch(t.href,r)}})();const $="modulepreload",P=function(h){return"/"+h},p={},R=function(e,o,l){let t=Promise.resolve();if(o&&o.length>0){let a=function(i){return Promise.all(i.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),n=s?.nonce||s?.getAttribute("nonce");t=a(o.map(i=>{if(i=P(i),i in p)return;p[i]=!0;const d=i.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":$,d||(m.as="script"),m.crossOrigin="",m.href=i,n&&m.setAttribute("nonce",n),document.head.appendChild(m),d)return new Promise((M,A)=>{m.addEventListener("load",M),m.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(a){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a}return t.then(a=>{for(const s of a||[])s.status==="rejected"&&r(s.reason);return e().catch(r)})};class x{constructor(){this.themes=new Map,this.currentTheme=null,this.selectedThemeId=null}registerTheme(e,o){this.themes.has(e)&&console.warn(`Theme "${e}" is already registered, overwriting...`),this.themes.set(e,o),console.log(`Theme "${e}" registered`)}async registerThemes(e){for(const[o,l]of Object.entries(e))this.registerTheme(o,l)}getAvailableThemes(){return Array.from(this.themes.keys())}selectRandomTheme(){const e=this.getAvailableThemes();if(e.length===0)throw new Error("No themes registered. Please register at least one theme.");const o=Math.floor(Math.random()*e.length);return this.selectedThemeId=e[o],sessionStorage.setItem("selectedTheme",this.selectedThemeId),console.log(`Random theme selected: ${this.selectedThemeId}`),this.selectedThemeId}getSelectedTheme(){return this.selectedThemeId||(this.selectedThemeId=sessionStorage.getItem("selectedTheme")),this.selectedThemeId}setSelectedTheme(e){if(!this.themes.has(e))throw new Error(`Theme "${e}" is not registered`);this.selectedThemeId=e,sessionStorage.setItem("selectedTheme",e)}async loadTheme(e,o,l){const t=this.themes.get(e);if(!t)throw new Error(`Theme "${e}" not found. Available themes: ${this.getAvailableThemes().join(", ")}`);if(this.currentTheme){console.log("Disposing previous theme...");try{this.currentTheme.dispose()}catch(r){console.error("Error disposing previous theme:",r)}this.currentTheme=null}console.log(`Loading theme: ${e}...`);try{const a=(await t()).default;if(!a)throw new Error(`Theme "${e}" does not have a default export`);const s=new a(o,l);console.log(`Initializing theme: ${e}...`),await s.init();const n=s.getHTMLContent();n&&this.injectHTMLContent(n);const i=s.getStyles();return i&&this.injectStyles(i,e),typeof s.onContentReady=="function"&&(console.log("Calling theme onContentReady..."),await s.onContentReady()),this.currentTheme=s,this.selectedThemeId=e,console.log(`Theme "${e}" loaded successfully!`),s}catch(r){throw console.error(`Failed to load theme "${e}":`,r),r}}injectHTMLContent(e){const o=document.querySelector(".page-content");if(!o){console.warn(".page-content container not found, HTML content not injected");return}o.innerHTML=e;const l=o.querySelectorAll("script"),t=[],r=[];l.forEach(n=>{n.src?t.push(n):r.push(n)});const a=n=>new Promise((i,d)=>{const u=document.createElement("script");Array.from(n.attributes).forEach(m=>{u.setAttribute(m.name,m.value)}),u.onload=i,u.onerror=d,n.parentNode.replaceChild(u,n)}),s=n=>{const i=document.createElement("script");Array.from(n.attributes).forEach(d=>{i.setAttribute(d.name,d.value)}),i.textContent=n.textContent,n.parentNode.replaceChild(i,n)};Promise.all(t.map(a)).then(()=>{r.forEach(s),console.log("HTML content injected and scripts executed")}).catch(n=>{console.error("Failed to load external scripts:",n)})}injectStyles(e,o){const l=document.getElementById("theme-styles");if(l&&l.remove(),e){const t=document.createElement("style");t.id="theme-styles",t.setAttribute("data-theme",o),t.textContent=e,document.head.appendChild(t),console.log(`Theme styles for "${o}" injected`)}}getCurrentTheme(){return this.currentTheme}isThemeLoaded(){return this.currentTheme!==null&&this.currentTheme.isReady()}async reloadCurrentTheme(e,o){if(!this.selectedThemeId)throw new Error("No theme selected");return await this.loadTheme(this.selectedThemeId,e,o)}}const b=document.querySelector("canvas.webgl"),f={width:window.innerWidth,height:window.innerHeight},T=new x;await T.registerThemes({ocean:()=>R(()=>import("./theme-ocean-DpaLo3-r.js"),__vite__mapDeps([0,1]))});let g=T.getSelectedTheme();g||(g=T.selectRandomTheme());console.log(`Selected theme: ${g}`);let c=null;try{c=await T.loadTheme(g,b,f),console.log("Theme loaded successfully!")}catch(h){console.error("Failed to load theme:",h)}const C=()=>{window.requestAnimationFrame(C),c&&c.isReady()&&c.tick()};C();let v=null,E=null,S=window.innerWidth,L=window.innerHeight;window.addEventListener("resize",()=>{clearTimeout(v),clearTimeout(E),v=setTimeout(()=>{const h=window.innerWidth,e=window.innerHeight;if((Math.abs(h-S)>.1||Math.abs(e-L)>.1)&&(S=h,L=e,f.width=h,f.height=e,c&&(c.resize(f),c.requiresReloadOnResize))){const o=c.resizeReloadDelay||500;E=setTimeout(async()=>{console.log("Reloading theme after resize...");try{const l=window.scrollY,t=T.getSelectedTheme();c&&c.dispose(),c=await T.loadTheme(t,b,f),window.scrollTo(0,l),y=l,c&&c.onScroll(l),console.log("Theme reloaded successfully after resize!")}catch(l){console.error("Failed to reload theme after resize:",l)}},o)}},200)});let y=window.scrollY;window.addEventListener("scroll",()=>{y=window.scrollY,c&&c.onScroll(y)});const w={x:0,y:0};window.addEventListener("mousemove",h=>{w.x=h.clientX/f.width-.5,w.y=h.clientY/f.height-.5,c&&c.onMouseMove(w)});
